;/*FB_PKG_DELIM*/

__d("useMAWBulkMaybeAutoTriggerDownload",["MAWDownloadMediaInWorkerDeferred","MAWMediaDownloadStatus","MAWMediaManagerUiIntegrationCheck","justknobx","react","react-compiler-runtime","useAsyncReStore","useMAWMediaDownloadStatusBulk"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect;b.useMemo;var j=b.useRef;function a(a,b,e,f){var g=d("react-compiler-runtime").c(13);f=c("useMAWMediaDownloadStatusBulk")(a,f);f=f.mawMediaStatuses;var h;g[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=[c("MAWMediaDownloadStatus").MISSING_FILE,c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,c("MAWMediaDownloadStatus").DOWNLOADING].filter(Boolean),g[0]=h):h=g[0];var k=h;g[1]!==a||g[2]!==e||g[3]!==f?(h=new Map(f==null?void 0:f.map(function(b,c){var f=(!d("MAWMediaManagerUiIntegrationCheck").getIsMediaManagerUiIntegrationEnabled()||e==null||e==="fullsize"||e==="fullsizeAndPreview")&&k.includes(b==null?void 0:b.mainMediaStatus);b=d("MAWMediaManagerUiIntegrationCheck").getIsMediaManagerUiIntegrationEnabled()&&e==="preview"&&k.includes(b==null?void 0:b.previewMediaStatus);b=b||f;return[a[c].attachment.attachmentFbid,b]})),g[1]=a,g[2]=e,g[3]=f,g[4]=h):h=g[4];f=h;var l=f;g[5]===Symbol["for"]("react.memo_cache_sentinel")?(h=new Map(),g[5]=h):h=g[5];var m=j(h),n=c("useAsyncReStore")();g[6]!==a||g[7]!==n||g[8]!==e||g[9]!==l||g[10]!==b?(f=function(){var f=[];a.forEach(function(a){var g,h,i=a.attachment;a=a.mediaRenderQpl;g=(g=l.get(i.attachmentFbid))!=null?g:!1;h=(h=m.current.get(i.attachmentFbid))!=null?h:!1;g&&!h&&(m.current.set(i.attachmentFbid,!0),!c("justknobx")._("3226")?d("MAWDownloadMediaInWorkerDeferred").maybeDownloadMediaInWorker({attachment:i,dbPromise:n,downloadType:e,mediaRenderQpl:a,triggerUIView:b}):f.push({attachment:i,mediaRenderQpl:a}))});f.length>0&&d("MAWDownloadMediaInWorkerDeferred").maybeBulkDownloadMediaInWorker({attachmentsWithQpl:f,dbPromise:n,downloadType:e,triggerUIView:b})},h=[a,n,e,m,l,b],g[6]=a,g[7]=n,g[8]=e,g[9]=l,g[10]=b,g[11]=f,g[12]=h):(f=g[11],h=g[12]);i(f,h)}g["default"]=a}),98);
__d("MWChatAttachmentMediaState.react",["$InternalEnum","I64","LSIntEnum","MAWClientMediaStatusUtils","MAWMediaManagerUiIntegrationCheck","MAWVideoAudioPlaybackErrorHandlerUtils","MessagingAttachmentType","RavenMessagingState","filterNulls","gkx","react","useClientMediaStatus","useMAWBulkMaybeAutoTriggerDownload","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.createContext,m=e.useEffect,n=e.useMemo,o=e.useState,p=b("$InternalEnum")({Image:0,Video:1,AnimatedImage:2}),q=l({canMoveBackward:!1,canMoveForward:!1,card:void 0,cards:[],currentIndex:0,isImageExpanded:!1,moveBackward:function(){},moveForward:function(){},moveTo:function(){},numberOfCards:0,setIsImageExpanded:function(){},shouldTriggerLoadMore:!1});function r(a){var b=a.attachmentType;a=a.ephemeralMediaState;return a!=null&&(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))&&(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("RavenMessagingState").PERMANENT))}function s(a){var b=a.attachmentType;a=a.ephemeralMediaState;return a!=null&&(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))&&(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("RavenMessagingState").PERMANENT))}function t(a,b,c,d){return c?d.hasMedia:b(d,"isPlayableMedia")!=null&&a(d,"isPlayableMedia")!=null}function u(a,b,e,f){var g=f.attachmentType;return!t(a,b,e,f)?!1:r(f)||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))}function v(a,b,e,f){var g=f.attachmentType;return!t(a,b,e,f)?!1:(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))}function w(a,b,e,f,g){var h=f.attachmentFbid,k=f.attachmentType,l=!1,m=!1;g=d("MAWClientMediaStatusUtils").getStatusDataFromLsdb({clientMediaStatus:g,statusKey:h});h=g.hasStatus;g=g.statusData;if(h&&!c("gkx")("5678")){h=g!=null?g:{};g=h.validationResult;l=g!=null?d("MAWVideoAudioPlaybackErrorHandlerUtils").isInvalidVideo(f,g):!1;m=g!=null?d("MAWVideoAudioPlaybackErrorHandlerUtils").isUnsupportedVideo(f,g):!1}return!t(a,b,e,f)||l||m?!1:s(f)||(i||(i=d("I64"))).equal(k,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))}function x(a,b){m(function(){a.forEach(function(a){try{a.attachment.hasMedia&&!(i||(i=d("I64"))).equal(a.attachment.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))&&b(a.attachment,"usePreloadThumbnails");return}catch(a){return}})},[a,b])}function a(a){var b=a.attachments,e=a.children,f=a.getIsSecureThread,g=a.getPlayableUrl,h=a.getPreviewUrl;a=a.initialAttachment;a=o(a);var i=a[0],j=a[1];a=o(!1);var l=a[0],m=a[1];a=c("usePrevious")(i==null?void 0:i.messageId);var r=n(function(){return b.map(function(a){return{attachment:a,mediaRenderQpl:null,statusKey:a.attachmentFbid}})},[b]),s=c("useClientMediaStatus")(r),t=n(function(){return i!=null&&d("MAWMediaManagerUiIntegrationCheck").getIsMediaManagerUiIntegrationEnabled()?[{attachment:i,mediaRenderQpl:null,statusKey:i.attachmentFbid}]:[]},[i]);c("useMAWBulkMaybeAutoTriggerDownload")(r,"fullsize","preview",s);c("useMAWBulkMaybeAutoTriggerDownload")(t,"fullsize","fullsizeAndPreview",s);var y=n(function(){return c("filterNulls")(b.map(function(a){var b=f(a);if(v(g,h,b,a)&&c("gkx")("9525"))return{attachment:a,type:p.AnimatedImage};if(u(g,h,b,a))return{attachment:a,type:p.Image};return w(g,h,b,a,s)?{attachment:a,type:p.Video}:null}))},[b,s,f,g,h]),z=i==null?-1:y.findIndex(function(a){return a.attachment.attachmentFbid===i.attachmentFbid&&a.attachment.messageId===i.messageId}),A=a!=null&&(i==null?void 0:i.messageId)!==a&&z>y.length-5;x(y,h);r=n(function(){var a=Math.max(0,y.length-1);return{canMoveBackward:z>0&&z!==-1,canMoveForward:z<a&&z!==-1,card:y[z],cards:y,currentIndex:z,isImageExpanded:l,moveBackward:function(){var a=Math.max(z-1,0);j((a=y[a])==null?void 0:a.attachment)},moveForward:function(){var b=Math.min(z+1,a);j((b=y[b])==null?void 0:b.attachment)},moveTo:function(a){j(a.attachment)},numberOfCards:y.length,setIsImageExpanded:m,shouldTriggerLoadMore:A}},[y,z,A,l]);return k.jsx(q.Provider,{value:r,children:e})}a.displayName=a.name+" [from "+f.id+"]";g.AttachmentMediaType=p;g.context=q;g.MWChatAttachmentMediaStateProviderFromAttachments=a}),98);
__d("MWV2MediaViewerContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;var j=i.createContext({getDownloadUrl:function(){},getPlayableUrl:function(){},getPreviewUrl:function(){},heroLoggingComponent:function(a){return null},loadMore:function(){},media:[]});function a(a){var b=d("react-compiler-runtime").c(10),c=a.children,e=a.getDownloadUrl,f=a.getPlayableUrl,g=a.getPreviewUrl,h=a.heroLoggingComponent,k=a.loadMore;a=a.media;var l;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==h||b[4]!==k||b[5]!==a?(l={getDownloadUrl:e,getPlayableUrl:f,getPreviewUrl:g,heroLoggingComponent:h,loadMore:k,media:a},b[0]=e,b[1]=f,b[2]=g,b[3]=h,b[4]=k,b[5]=a,b[6]=l):l=b[6];e=l;f=e;b[7]!==c||b[8]!==f?(g=i.jsx(j.Provider,{value:f,children:c}),b[7]=c,b[8]=f,b[9]=g):g=b[9];return g}g.context=j;g.MWV2MediaViewerContextProvider=a}),98);
__d("useMWMaybeInboxMediaRestoreLoop",["cr:20239","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=d("react-compiler-runtime").c(2);a=b("cr:20239")(a);var e;c[0]!==a?(e=a!=null?a:{onEBOnboarded:i,startMediaSync:h},c[0]=a,c[1]=e):e=c[1];return e}function h(){}function i(){}g["default"]=a}),98);
__d("useMWV2MediaViewerOpenDownloadUrl",["react","react-compiler-runtime","useMWV2MediaViewerOpenPlayableUrl"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=c("useMWV2MediaViewerOpenPlayableUrl")(),e;a[0]!==b?(e=function(a,c,d){a=b(a,c,d);if(a==null)return;c=new URL(a);c.searchParams.set("dl","1");return c.toString()},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("MWV2MediaViewerCutoverWrapper.react",["LSThreadMediaGalleryGroup","MWChatAttachmentMediaState.react","MWMessageSearchStatusTypes","MWV2MediaViewerContext.react","emptyFunction","justknobx","react","react-compiler-runtime","useMAWLoadMoreCutoverThreadSharedAttachments","useMWMaybeInboxMediaRestoreLoop","useMWMediaGalleryRestoreStatus","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useMWV2MediaViewerSecurePreviewUrl_CausesSuspense"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(30),e=a.children,f=a.initialAttachment,g=a.openThreadKey,h=a.secureThreadKey;a=a.threadType;var k;b[0]!==h||b[1]!==a?(k={threadKey:h,threadType:a},b[0]=h,b[1]=a,b[2]=k):k=b[2];c("useMWMaybeInboxMediaRestoreLoop")(k);b[3]!==h||b[4]!==a?(k={threadKey:h,threadType:a},b[3]=h,b[4]=a,b[5]=k):k=b[5];k=c("useMWMediaGalleryRestoreStatus")(k);k=k===d("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS;var l;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(l={entrypoint:"media_viewer"},b[6]=l):l=b[6];var m;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(m=c("justknobx")._("3233"),b[7]=m):m=b[7];h=c("useMAWLoadMoreCutoverThreadSharedAttachments")(h,g,a,l,c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,k,m);g=h.attachments;a=h.onLoadMore;var n=j,o=c("useMWV2MediaViewerOpenPreviewUrl")(),p=c("useMWV2MediaViewerOpenPlayableUrl")(),q=c("useMWV2MediaViewerOpenDownloadUrl")(),r=c("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense")(),s=c("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")();b[8]!==o||b[9]!==r?(l=function(a,b,c){if(!a)return"";return!n(a)?o(a,b,c):r(a,b,c)},b[8]=o,b[9]=r,b[10]=l):l=b[10];k=l;b[11]!==p||b[12]!==s?(m=function(a,b,c){if(a==null)return"";return!n(a)?p(a,b,c):s(a,b,c)},b[11]=p,b[12]=s,b[13]=m):m=b[13];h=m;b[14]!==q||b[15]!==s?(l=function(a,b,c){if(a==null)return"";return!n(a)?q(a,b,c):s(a,b,c)},b[14]=q,b[15]=s,b[16]=l):l=b[16];m=l;b[17]!==g||b[18]!==e||b[19]!==h||b[20]!==k||b[21]!==f?(l=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:g,getIsSecureThread:n,getPlayableUrl:h,getPreviewUrl:k,initialAttachment:f,children:e}),b[17]=g,b[18]=e,b[19]=h,b[20]=k,b[21]=f,b[22]=l):l=b[22];b[23]!==g||b[24]!==m||b[25]!==h||b[26]!==k||b[27]!==a||b[28]!==l?(e=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:m,getPlayableUrl:h,getPreviewUrl:k,heroLoggingComponent:c("emptyFunction"),loadMore:a,media:g,children:l}),b[23]=g,b[24]=m,b[25]=h,b[26]=k,b[27]=a,b[28]=l,b[29]=e):e=b[29];return e}function j(a){return!((a==null?void 0:a.transportKey)==="FBBroker"||(a==null?void 0:a.transportKey)==="FBLegacyBroker")}g["default"]=a}),98);
__d("MWV2MediaViewerNullState.react",["fbt","CometColumn.react","CometColumnItem.react","FDSNullState.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(c("CometColumn.react"),{expanding:!0,verticalAlign:"center",children:j.jsx(c("CometColumnItem.react"),{children:j.jsx(c("FDSNullState.react"),{headline:h._(/*BTDS*/"Sorry, this content isn't available at this time")})})}),a[0]=b):b=a[0];return b}g["default"]=a}),226);
__d("MWV2MediaViewerOpenWrapper.react",["CometHero.react","MWChatAttachmentMediaState.react","MWSharedAttachmentsSectionHooks","MWV2MediaViewerContext.react","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react","useMWMediaLoadingQplLogger","useMWV2MediaViewerOpenDownloadUrl","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){var b=d("react-compiler-runtime").c(22),e=a.children,f=a.initialAttachment;a=a.thread;var g=d("MWSharedAttachmentsSectionHooks").useQueryMediaAttachments(a.threadKey),h=g[0],l=g[1],m=g[2];g=g[4];var n;b[0]!==a.threadType?(n={entrypoint:"media_viewer",threadType:a.threadType},b[0]=a.threadType,b[1]=n):n=b[1];n=c("useMWMediaLoadingQplLogger")(n);l=c("useLoadMoreThreadSharedAttachments.react")(l,a.threadKey,n.logLoadMediaStart);a=g!=null?g:!0;b[2]!==m||b[3]!==l||b[4]!==h||b[5]!==n.logLoadMediaCancel||b[6]!==n.logLoadMediaSuccess||b[7]!==a?(g={attachmentsRange:m,hasMore:a,loadMore:l,logLoadMediaCancel:n.logLoadMediaCancel,logLoadMediaSuccess:n.logLoadMediaSuccess,media:h},b[2]=m,b[3]=l,b[4]=h,b[5]=n.logLoadMediaCancel,b[6]=n.logLoadMediaSuccess,b[7]=a,b[8]=g):g=b[8];m=d("MWSharedAttachmentsSectionHooks").useLoader(g);l=m[1];n=c("useMWV2MediaViewerOpenPreviewUrl")();a=c("useMWV2MediaViewerOpenPlayableUrl")();g=c("useMWV2MediaViewerOpenDownloadUrl")();m=k;b[9]!==e||b[10]!==a||b[11]!==n||b[12]!==f||b[13]!==h?(m=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:h,getIsSecureThread:m,getPlayableUrl:a,getPreviewUrl:n,initialAttachment:f,children:e}),b[9]=e,b[10]=a,b[11]=n,b[12]=f,b[13]=h,b[14]=m):m=b[14];b[15]!==g||b[16]!==a||b[17]!==n||b[18]!==l||b[19]!==h||b[20]!==m?(e=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:g,getPlayableUrl:a,getPreviewUrl:n,heroLoggingComponent:j,loadMore:l,media:h,children:m}),b[15]=g,b[16]=a,b[17]=n,b[18]=l,b[19]=h,b[20]=m,b[21]=e):e=b[21];return e}function j(a){return i.jsx(c("CometHero.react"),{description:a})}j.displayName=j.name+" [from "+f.id+"]";function k(){return!1}g["default"]=a}),98);
__d("MWV2MediaViewerSecureWrapper.react",["LSThreadMediaGalleryGroup","MAWDbMsg","MWChatAttachmentMediaState.react","MWSharedAttachmentsSectionHooks","MWV2MediaViewerContext.react","MWV2MediaViewerNullState.react","cr:5709","cr:5931","cr:5970","emptyFunction","justknobx","react","react-compiler-runtime","useMAWQuerySecureMediaAttachments","useMWMaybeInboxMediaRestoreLoop","useMWMediaLoadingQplLogger","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useMWV2MediaViewerSecurePreviewUrl_CausesSuspense"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;function a(a){return j}function j(){}var k=b("cr:5709")==null?a:b("cr:5709");function e(a){var e=d("react-compiler-runtime").c(34),f=a.children,g=a.initialAttachment;a=a.thread;var h;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=c("justknobx")._("3233"),e[0]=h):h=e[0];h=h;var j=c("useMAWQuerySecureMediaAttachments")(a.threadKey,h),m=j[0],n=j[2],o=j[3];j=j[4];c("useMWMaybeInboxMediaRestoreLoop")(a);var p=j!=null?j:!0;e[1]!==a.threadType?(j={entrypoint:"media_viewer",threadType:a.threadType},e[1]=a.threadType,e[2]=j):j=e[2];j=c("useMWMediaLoadingQplLogger")(j);if(e[3]!==(n==null?void 0:n.lastLoadedMessageId)){var q;q=(q=d("MAWDbMsg").toMsgId((q=n==null?void 0:n.lastLoadedMessageId)!=null?q:""))!=null?q:void 0;e[3]=n==null?void 0:n.lastLoadedMessageId;e[4]=q}else q=e[4];e[5]!==p||e[6]!==o||e[7]!==j||e[8]!==q||e[9]!==a.threadKey?(h={earliestLoadedMediaMessageId:q,hasMoreBefore:p,mediaGalleryGroup:c("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,minTimestampMs:o,pageSize:h,qplLogger:j,threadKey:a.threadKey},e[5]=p,e[6]=o,e[7]=j,e[8]=q,e[9]=a.threadKey,e[10]=h):h=e[10];var r=k(h);e[11]!==p||e[12]!==r?(o=function(){p&&r()},e[11]=p,e[12]=r,e[13]=o):o=e[13];q=o;e[14]!==n||e[15]!==p||e[16]!==q||e[17]!==m||e[18]!==j.logLoadMediaCancel||e[19]!==j.logLoadMediaSuccess?(a={attachmentsRange:n,hasMore:p,loadMore:q,logLoadMediaCancel:j.logLoadMediaCancel,logLoadMediaSuccess:j.logLoadMediaSuccess,media:m},e[14]=n,e[15]=p,e[16]=q,e[17]=m,e[18]=j.logLoadMediaCancel,e[19]=j.logLoadMediaSuccess,e[20]=a):a=e[20];h=d("MWSharedAttachmentsSectionHooks").useLoader(a);o=h[1];n=c("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense")();q=c("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")();j=l;if(b("cr:5970")==null||b("cr:5931")==null){e[21]===Symbol["for"]("react.memo_cache_sentinel")?(a=i.jsx(c("MWV2MediaViewerNullState.react"),{}),e[21]=a):a=e[21];return a}e[22]!==f||e[23]!==q||e[24]!==n||e[25]!==g||e[26]!==m?(h=i.jsx(d("MWChatAttachmentMediaState.react").MWChatAttachmentMediaStateProviderFromAttachments,{attachments:m,getIsSecureThread:j,getPlayableUrl:q,getPreviewUrl:n,initialAttachment:g,children:f}),e[22]=f,e[23]=q,e[24]=n,e[25]=g,e[26]=m,e[27]=h):h=e[27];e[28]!==q||e[29]!==n||e[30]!==o||e[31]!==m||e[32]!==h?(a=i.jsx(d("MWV2MediaViewerContext.react").MWV2MediaViewerContextProvider,{getDownloadUrl:q,getPlayableUrl:q,getPreviewUrl:n,heroLoggingComponent:c("emptyFunction"),loadMore:o,media:m,children:h}),e[28]=q,e[29]=n,e[30]=o,e[31]=m,e[32]=h,e[33]=a):a=e[33];return a}function l(){return!0}g["default"]=e}),98);
__d("MWV2MediaViewer.react",["FBLogger","FocusRegion.react","FocusWithinHandler.react","I64","LSMessagingThreadTypeUtil","MAWThreadCutover","MWFocusTable.react","MWLSThread","MWPThreadCapabilitiesContext","MWV2MediaViewerCutoverWrapper.react","MWV2MediaViewerNullState.react","MWV2MediaViewerOpenWrapper.react","MWV2MediaViewerSecureWrapper.react","XPlatReactFocusRegion.react","cr:7186","focusScopeQueries","justknobx","react","react-compiler-runtime","useMWMediaViewerOpenQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;e.useCallback;var k=e.useEffect,l=e.useId;function a(a){var e=d("react-compiler-runtime").c(54),f=a.attachment,g=a.onClose;a=d("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger();var h=a.endSuccess,m;e[0]!==h?(a=function(){h()},m=[h],e[0]=h,e[1]=a,e[2]=m):(a=e[1],m=e[2]);k(a,m);a=d("MWLSThread").useThread(f.threadKey);m=d("MWPThreadCapabilitiesContext").Provider;var n=l(),o;e[3]!==n?(o=function(a){a||d("FocusRegion.react").focusRegionById(n,d("MWFocusTable.react").tabbableScopeQuery)},e[3]=n,e[4]=o):o=e[4];o=o;var p=d("MAWThreadCutover").useGetCutoverOpenThreadKey(f.threadKey),q=d("MAWThreadCutover").useCutoverSecureThreadKeyForOpenThreadKey(p==null?f.threadKey:void 0);if(a==null){c("FBLogger")("messenger_web_media").mustfix("Thread is null in media viewer for attachment with threadKey: %s",(i||(i=d("I64"))).to_string(f.threadKey));var r;e[5]===Symbol["for"]("react.memo_cache_sentinel")?(r=j.jsx(c("MWV2MediaViewerNullState.react"),{}),e[5]=r):r=e[5];return r}r=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType);if(p!=null||q!=null){p=p!=null?p:a.threadKey;q=q!=null?q:a.threadKey;var s;e[6]!==g?(s=function(){g&&g()},e[6]=g,e[7]=s):s=e[7];var t;e[8]!==f||e[9]!==s||e[10]!==a?(t=j.jsx(b("cr:7186"),{initialAttachment:f,onClose:s,thread:a}),e[8]=f,e[9]=s,e[10]=a,e[11]=t):t=e[11];e[12]!==f||e[13]!==p||e[14]!==q||e[15]!==t||e[16]!==a.threadType?(s=j.jsx(c("MWV2MediaViewerCutoverWrapper.react"),{initialAttachment:f,openThreadKey:p,secureThreadKey:q,threadType:a.threadType,children:t}),e[12]=f,e[13]=p,e[14]=q,e[15]=t,e[16]=a.threadType,e[17]=s):s=e[17];p=s;e[18]!==p||e[19]!==a?(q=j.jsx(m,{thread:a,children:p}),e[18]=p,e[19]=a,e[20]=q):q=e[20];t=q;e[21]!==t||e[22]!==n?(s=j.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,containFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,id:n,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:t}),e[21]=t,e[22]=n,e[23]=s):s=e[23];p=s;e[24]!==p||e[25]!==o?(q=c("justknobx")._("3588")?j.jsx(c("FocusWithinHandler.react"),{onFocusChange:o,onFocusVisibleChange:o,children:p}):p,e[24]=p,e[25]=o,e[26]=q):q=e[26];return q}if(r){e[27]!==g?(t=function(){g&&g()},e[27]=g,e[28]=t):t=e[28];e[29]!==f||e[30]!==t||e[31]!==a?(s=j.jsx(b("cr:7186"),{initialAttachment:f,onClose:t,thread:a}),e[29]=f,e[30]=t,e[31]=a,e[32]=s):s=e[32];e[33]!==f||e[34]!==s||e[35]!==a?(p=j.jsx(c("MWV2MediaViewerSecureWrapper.react"),{initialAttachment:f,thread:a,children:s}),e[33]=f,e[34]=s,e[35]=a,e[36]=p):p=e[36];q=p;e[37]!==q||e[38]!==a?(r=j.jsx(m,{thread:a,children:q}),e[37]=q,e[38]=a,e[39]=r):r=e[39];t=r;e[40]!==t||e[41]!==n?(s=j.jsx(c("XPlatReactFocusRegion.react"),{autoFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,containFocusQuery:d("MWFocusTable.react").tabbableScopeQuery,id:n,recoverFocusQuery:d("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:t}),e[40]=t,e[41]=n,e[42]=s):s=e[42];p=s;e[43]!==p||e[44]!==o?(m=c("justknobx")._("3588")?j.jsx(c("FocusWithinHandler.react"),{onFocusChange:o,onFocusVisibleChange:o,children:p}):p,e[43]=p,e[44]=o,e[45]=m):m=e[45];return m}e[46]!==f||e[47]!==g||e[48]!==a?(q=j.jsx(b("cr:7186"),{initialAttachment:f,onClose:g,thread:a}),e[46]=f,e[47]=g,e[48]=a,e[49]=q):q=e[49];e[50]!==f||e[51]!==q||e[52]!==a?(r=j.jsx(c("MWV2MediaViewerOpenWrapper.react"),{initialAttachment:f,thread:a,children:q}),e[50]=f,e[51]=q,e[52]=a,e[53]=r):r=e[53];return r}g["default"]=a}),98);